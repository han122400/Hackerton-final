<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>공고 상세</title>
    <link rel="stylesheet" href="/static/css/bootstrap.min.css" />
    <style>
      .rounded-16 {
        border-radius: 16px;
      }
      .logo-box {
        width: 96px;
        height: 96px;
        border-radius: 12px;
        overflow: hidden;
        background: #fff;
      }
      .desc {
        font-size: 0.95rem;
        line-height: 1.6;
      }
      .desc img,
      .desc video,
      .desc iframe {
        max-width: 100%;
        height: auto;
      }
      .desc pre,
      .desc code {
        white-space: pre-wrap;
        word-break: break-word;
      }
      .badge-contrast {
        background: #eef2ff;
        color: #111827;
        border: 1px solid rgba(0, 0, 0, 0.12);
      }
      .kv-table th {
        width: 160px;
      }
    </style>
  </head>
  <body class="bg-light">
    <!-- 헤더 -->
    <nav class="navbar bg-white border-bottom sticky-top">
      <div class="container-xxl d-flex align-items-center gap-2">
        <button
          class="btn btn-outline-secondary btn-sm"
          onclick="history.back()"
        >
          ←
        </button>
        <span class="fw-semibold">채용공고 상세</span>
        <div class="ms-auto d-none d-md-block">
          <!-- ✅ 버튼: 지원하기 → 이 공고로 면접보기 -->
          <button id="interviewBtn" type="button" class="btn btn-primary">
            이 공고로 면접보기
          </button>
        </div>
      </div>
    </nav>

    <main class="container-xxl py-4">
      <!-- 상단 요약 -->
      <section class="card shadow-sm rounded-16 mb-4">
        <div class="card-body">
          <div class="d-flex gap-3 align-items-start">
            <div
              id="companyLogo"
              class="logo-box d-flex align-items-center justify-content-center border"
            ></div>
            <div class="flex-grow-1 min-w-0">
              <h1 id="jobTitle" class="h5 mb-1 text-truncate">제목</h1>
              <div id="jobCompany" class="text-secondary small mb-2">
                회사명
              </div>
              <div class="d-flex flex-wrap gap-2 align-items-center small">
                <span id="jobLocation" class="badge badge-contrast"
                  >근무지</span
                >
                <span id="jobDeadline" class="badge badge-contrast"
                  >마감일</span
                >
                <span
                  id="jobEmpType"
                  class="badge badge-contrast d-none"
                ></span>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- 상세 섹션들 (렌더링 대상 컨테이너) -->
      <section id="sections" class="vstack gap-4 mb-4"></section>

      <!-- 모집분야 -->
      <section
        id="recruitListSection"
        class="card shadow-sm rounded-16 mb-4 d-none"
      >
        <div class="card-body">
          <h3 class="h6 fw-semibold mb-3">모집분야</h3>
          <div id="recruitListBody" class="vstack gap-3"></div>
        </div>
      </section>

      <!-- 직종 -->
      <section
        id="jobsCodeSection"
        class="card shadow-sm rounded-16 mb-4 d-none"
      >
        <div class="card-body">
          <h3 class="h6 fw-semibold mb-3">직종</h3>
          <div id="jobsCodeBody" class="row row-cols-1 row-cols-md-2 g-2"></div>
        </div>
      </section>

      <!-- 첨부파일 -->
      <section
        id="attachmentsSection"
        class="card shadow-sm rounded-16 mb-4 d-none"
      >
        <div class="card-body">
          <h3 class="h6 fw-semibold mb-3">첨부파일</h3>
          <div id="attachmentsBody" class="vstack gap-3"></div>
        </div>
      </section>

      <!-- 기타 상세 -->
      <section id="rawAllSection" class="card shadow-sm rounded-16">
        <div class="card-body">
          <h3 class="h6 fw-semibold mb-3">기타 상세</h3>
          <div id="rawAllBody" class="small"></div>
        </div>
      </section>

      <!-- 모바일 버튼 -->
      <div class="d-grid gap-2 d-md-none my-4">
        <button
          id="interviewBtnMobile"
          type="button"
          class="btn btn-primary btn-lg"
        >
          이 공고로 면접보기
        </button>
      </div>
    </main>

    <script src="/static/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/api.js"></script>
    <script src="/static/js/job_detail.js?v=final"></script>

    <!-- 본문 링크 새탭 열기 -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const fixTargets = () => {
          document
            .querySelectorAll(
              "#sections a[href], #recruitListSection a[href], #attachmentsSection a[href], #rawAllSection a[href]"
            )
            .forEach((a) => {
              a.target = "_blank";
              a.rel = "noopener noreferrer";
            });
        };
        fixTargets();
        new MutationObserver(fixTargets).observe(document.body, {
          childList: true,
          subtree: true,
        });
      });
    </script>
  </body>
</html>
