<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>면접 연습 - 모의면접</title>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet" />
    <style>
      .question-card {
        border-radius: 16px;
      }
      .answer-area {
        min-height: 180px;
      }
      .timer-badge {
        font-variant-numeric: tabular-nums;
      }
      .record-pulse {
        width: 14px;
        height: 14px;
        border-radius: 50%;
        background: #dc3545;
        animation: pulse 1.2s infinite;
      }
      @keyframes pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.6);
        }
        70% {
          box-shadow: 0 0 0 12px rgba(220, 53, 69, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(220, 53, 69, 0);
        }
      }
      .video-wrap video {
        width: 100%;
        border-radius: 12px;
        background: #000;
      }
      .hint {
        font-size: 12px;
        color: #6c757d;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-light bg-white border-bottom shadow-sm fixed-top">
      <div
        class="container-xxl d-flex align-items-center justify-content-between"
        style="height: 64px"
      >
        <div>
          <div class="fw-semibold">모의면접 진행중</div>
          <small class="text-secondary">
            <span id="interviewCompany">회사명</span> ·
            <span id="interviewPosition">직무명</span>
          </small>
        </div>
        <span class="badge text-bg-primary timer-badge px-3 py-2" id="timer"
          >00:00</span
        >
      </div>
    </nav>

    <main class="container-xxl" style="padding-top: 88px; padding-bottom: 24px">
      <div class="row justify-content-center">
        <div class="col-12 col-lg-8">
          <!-- 질문 -->
          <div class="card question-card bg-light border-0 mb-3">
            <div class="card-body">
              <div class="small text-secondary mb-2">
                질문 <span id="currentQuestion">1</span> /
                <span id="totalQuestions">5</span>
              </div>
              <div id="questionText" class="fw-semibold">
                자기소개를 간단히 해주세요.
              </div>
            </div>
          </div>

          <!-- 라이브 미리보기 & 녹화 상태 -->
          <div class="video-wrap mb-2">
            <video
              id="livePreview"
              class="d-none"
              autoplay
              muted
              playsinline
            ></video>
          </div>
          <div
            id="recordingSection"
            class="d-flex justify-content-between align-items-center py-2"
          >
            <div
              id="recordingIndicator"
              class="d-none align-items-center gap-2 text-secondary"
            >
              <span class="record-pulse"></span>
              <span class="small">녹음 중... 말씀해주세요</span>
            </div>
            <div class="hint">권한 허용 후 시작됩니다(카메라·마이크)</div>
          </div>

          <!-- 텍스트 답변 -->
          <div class="mb-3">
            <textarea
              id="answerText"
              class="form-control answer-area"
              placeholder="답변을 입력하거나 음성으로 답변해주세요..."
              rows="6"
            ></textarea>
          </div>

          <!-- 버튼 / 진행바 -->
          <div class="border-top pt-3">
            <div class="d-flex gap-2 justify-content-between mb-3">
              <button
                id="recordButton"
                class="btn btn-danger d-flex align-items-center gap-2"
                onclick="toggleRecording()"
              >
                <svg
                  width="18"
                  height="18"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <circle cx="12" cy="12" r="3" />
                  <path
                    d="M12 1v6M12 17v6M4.22 4.22l4.24 4.24M15.54 15.54l4.24 4.24M1 12h6M17 12h6M4.22 19.78l4.24-4.24M15.54 8.46l4.24-4.24"
                  />
                </svg>
                음성 답변
              </button>
              <button class="btn btn-primary" onclick="nextQuestion()">
                다음 질문
              </button>
            </div>
            <div class="progress" style="height: 6px">
              <div
                id="progressFill"
                class="progress-bar"
                style="width: 20%"
              ></div>
            </div>
          </div>

          <!-- 녹화본 미리보기(종료 후) -->
          <div id="playbackList" class="mt-3"></div>
        </div>
      </div>
    </main>

    <script src="/static/js/bootstrap.bundle.min.js"></script>
    <script src="/static/js/data.js"></script>
    <script src="/static/js/interview.js"></script>
  </body>
</html>
